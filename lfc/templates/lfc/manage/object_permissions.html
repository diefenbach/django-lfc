{% load i18n %}
{% load lfc_tags %}

<h2 class="first-heading">
    {% trans 'Worflow' %}
</h2>

<p>The current worflow is: <span style="font-weight:bold">{{ workflow }}</span></p>

<h2 class="middle-heading">
    {% trans 'Permissions' %}
</h2>

<form action="{% url lfc_update_object_permissions obj.id %}"
      method="post">

    <table class="lfs-manage-table" width="99%">
        <tr>
            <th width="100px">{% trans "Inherit" %}</th>
            <th width="200px">{% trans "Permission" %}</th>
            {% for role in roles %}
                <th>{{ role.name }}</th>
            {% endfor %}
        </tr>
        {% for permission in permissions %}
            <tr>
                <td><input type="checkbox" name="inherit" value="{{ permission.codename }}" {% if permission.is_inherited %}checked="checked"{% endif %}/></td>
                <td>{{ permission.name }}</td>
                {% for role in permission.roles %}
                    <td><input type="checkbox" name="permission" value="{{ role.id }}|{{ permission.codename }}" {% if role.has_permission %}checked="checked"{% endif %}/></td>
                {% endfor %}
            </tr>
        {% endfor %}
    </table>

    {% ifhasperm edit %}
        <input class="ajax-save-button"
               type="submit" name="paste" value="{% trans 'Save permissions' %}" />
    {% endifhasperm %}
</form>

<div id="local-roles">
    {{ local_roles|safe }}
</div>
